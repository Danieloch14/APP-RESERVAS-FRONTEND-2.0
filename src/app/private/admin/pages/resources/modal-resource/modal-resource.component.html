<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header justify-content-center">
      <h4 class="modal-title">{{ title }}</h4>
    </div>
    <div class="modal-body mt-4">
      <form [formGroup]="resourceForm">
        <div class="row">
          <!--Code Number-->
          <div class="col-sm-6">
            <mdb-form-control>
              <input
                mdbInput
                mdbValidate
                type="text"
                id="codNumber"
                class="form-control mb-4"
                formControlName="codNumber"
              />
              <label mdbLabel class="form-label" for="codNumber">
                Código del recurso <span class="text-danger">*</span>
              </label>
            </mdb-form-control>
          </div>
          <!--Capacity-->
          <div class="col-sm-3">
            <mdb-form-control>
              <input
                mdbInput
                mdbValidate
                type="number"
                id="capacity"
                class="form-control mb-4"
                formControlName="capacity"
              />
              <label mdbLabel class="form-label" for="capacity">
                Capacidad <span class="text-danger">*</span>
              </label>
            </mdb-form-control>
          </div>
          <!--Precio-->
          <div class="col-sm-3">
            <mdb-form-control>
              <input
                mdbInput
                mdbValidate
                type="number"
                id="price"
                class="form-control mb-4"
                formControlName="price"
              />
              <label mdbLabel class="form-label" for="price">
                Precio <span class="text-danger">*</span>
              </label>
            </mdb-form-control>
          </div>
        </div>

        <div class="row">
          <!--Resource Type-->
          <div class="col">
            <mat-form-field appearance="outline">
              <mat-label>Tipo de recurso</mat-label>
              <mat-select formControlName="idTypeResource">
                <mat-option value="1">Video</mat-option>
                <mat-option value="2">Audio</mat-option>
                <mat-option value="3">Imagen</mat-option>
                <mat-option value="4">Documento</mat-option>
                <!-- <mat-option [value]="resource.id_resource" *ngFor="let resource of listResources">
                                    {{resource.name}}
                                </mat-option> -->
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <!--Location-->
          <div class="col">
            <mat-form-field appearance="outline">
              <mat-label>Ubicación</mat-label>
              <mat-select formControlName="idLocation">
                <mat-option value="1">Condado y prensa</mat-option>
                <mat-option value="2">Iñaquito</mat-option>
                <mat-option value="3">Carcelen</mat-option>
                <!-- <mat-option [value]="location.idLocation" *ngFor="let location of listLocations">
                                    {{location.address}}
                                </mat-option> -->
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <mdb-form-control>
              <input
                mdbInput
                mdbValidate
                type="text"
                id="content"
                class="form-control mb-4"
                formControlName="content"
              />
              <label mdbLabel class="form-label" for="content">
                Contenido <span class="text-danger">*</span>
              </label>
            </mdb-form-control>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <div *ngIf="selectedFile" class="change_image">
              <img
                [src]="getImageUrlPath(selectedFile)"
                alt="Vista previa del archivo"
              />
              <button class="btn btn-warning mb-4" (click)="clearFile()">
                Eliminar
              </button>
            </div>
            <div class="image-upload" *ngIf="!selectedFile">
              <label for="fileInput">Cargar imagen del recurso</label>
              <input
                id="fileInput"
                type="file"
                (change)="onFileSelected($event)"
              />
            </div>
          </div>
        </div>
      </form>
      <!--ALERTS-->
      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          idTypeResourceField?.invalid &&
          (idTypeResourceField?.dirty || idTypeResourceField?.touched)
        "
      >
        <span *ngIf="idTypeResourceField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Escoja el tipo de recurso
        </span>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          idLocationField?.invalid &&
          (idLocationField?.dirty || idLocationField?.touched)
        "
      >
        <span *ngIf="idLocationField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Escoja una Ubicación
        </span>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          capacityField?.invalid &&
          (capacityField?.dirty || capacityField?.touched)
        "
      >
        <span *ngIf="capacityField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Ingrese la capacidad del recurso
        </span>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          codNumberField?.invalid &&
          (codNumberField?.dirty || codNumberField?.touched)
        "
      >
        <span *ngIf="codNumberField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Ingreso el código del recurso
        </span>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          contentField?.invalid &&
          (contentField?.dirty || contentField?.touched)
        "
      >
        <span *ngIf="contentField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Ingrese el contenido del recurso
        </span>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          priceField?.invalid && (priceField?.dirty || priceField?.touched)
        "
      >
        <span *ngIf="priceField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Ingrese el precio del recurso, si es gratuito ingrese 0
        </span>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="
          pathImagesField?.invalid &&
          (pathImagesField?.dirty || pathImagesField?.touched)
        "
      >
        <span *ngIf="pathImagesField?.hasError('required')">
          <i class="fas fa-exclamation-circle mb-1"></i>
          Suba la imagen del recurso
        </span>
      </div>
      <!--ALERTS-->
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-danger btn-lg" (click)="close()">
        CANCELAR
      </button>
      <button
        type="button"
        class="btn btn-warning btn-lg"
        [disabled]="resourceForm.invalid"
        (click)="save()"
      >
        GUARDAR
      </button>
    </div>
  </div>
</div>
